# ğŸ“¦ Bot de WhatsApp para Consulta de Precios de CamarÃ³n  

Este proyecto implementa un **bot de WhatsApp** para **BGR EXPORT** que automatiza la consulta de precios de camarÃ³n, cÃ¡lculo de costos de flete y glaseo.  

El sistema utiliza **Python con FastAPI**, se conecta a **Twilio WhatsApp API** y obtiene la informaciÃ³n desde un archivo **Excel (hoja PRECIOS FOB)** que se actualiza periÃ³dicamente.  

---

## ğŸš€ Funcionalidades  
- Consulta de precios de camarÃ³n segÃºn talla ingresada por el usuario.  
- CÃ¡lculo automÃ¡tico de costos adicionales:  
  - **Costo Fijo**  
  - **Glaseo (factor de rendimiento)**  
  - **Flete**  
- GeneraciÃ³n de respuestas claras en formato tabla o imagen.  
- Lectura dinÃ¡mica del archivo Excel como base de datos.  
- Escenarios flexibles:  
  - Bot con reglas predefinidas.  
  - Bot con IA (procesamiento de lenguaje natural).  

---

## ğŸ“Š Calculadora de Precios  

El sistema replica la lÃ³gica de la **calculadora del Excel (secciÃ³n derecha de la hoja PRECIOS FOB)**.  

**Ejemplo de cÃ¡lculo:**  
- Producto: CamarÃ³n **talla 16/20**  
- Precio base: **$8.55 por libra**  

**Ajustes aplicados:**  
1. **Costo Fijo:** $0.25 por libra  
2. **Glaseo (factor de rendimiento):** 0.7 â†’ (70% camarÃ³n real, 30% hielo)  
3. **Flete:** $0.20 por libra  

**Resultado:**  
- Precio final de venta â‰ˆ **$12.22 por libra**  

---

## ğŸ—ï¸ Arquitectura del Sistema  

**Flujo general:**  

Usuario WhatsApp â†’ Twilio WhatsApp API â†’ FastAPI (Railway) â†’ Lectura Excel â†’ Respuesta al usuario  

---

**Componentes principales:**  
- **Lenguaje backend:** Python (FastAPI)  
- **Hosting:** Railway (escalable y econÃ³mico)  
- **MensajerÃ­a:** Twilio WhatsApp API  
- **Datos:** Excel (hoja PRECIOS FOB)  
- **Opcional:** OpenAI GPT-4o-mini para IA conversacional  

---

## âš™ï¸ TecnologÃ­as Recomendadas  

- **Backend:** Python 3.11+, FastAPI  
- **Excel:** `pandas`, `openpyxl`  
- **WhatsApp API:** Twilio  
- **GeneraciÃ³n de imÃ¡genes/tablas:** Pillow  
- **Hosting:** Railway  
- **Opcional IA:** OpenAI GPT-4o-mini  

---

## ğŸ’° Escenarios de Costos  

### Escenario 1: Bot con IA  
- Twilio WhatsApp API: $0.005 por mensaje  
- OpenAI GPT-4o-mini: $0.00015 por mensaje  
- Railway hosting: $5â€“$10/mes  
- **Total estimado: $15â€“$20/mes**  

### Escenario 2: Bot sin IA (basado en reglas)  
- Twilio WhatsApp API: $0.005 por mensaje  
- Railway hosting: $5â€“$10/mes  
- **Total estimado: $10â€“$15/mes**  

---

## ğŸ“‚ Estructura esperada del proyecto  

bot-whatsapp/
â”‚â”€â”€ app/
â”‚ â”œâ”€â”€ main.py # Backend FastAPI
â”‚ â”œâ”€â”€ routes.py # Endpoints para Twilio
â”‚ â”œâ”€â”€ services/
â”‚ â”‚ â”œâ”€â”€ excel.py # LÃ³gica de lectura de Excel
â”‚ â”‚ â”œâ”€â”€ pricing.py # Calculadora de precios
â”‚ â”‚ â””â”€â”€ utils.py
â”‚â”€â”€ data/
â”‚ â””â”€â”€ precios_fob.xlsx # Base de datos Excel
â”‚â”€â”€ tests/
â”‚â”€â”€ requirements.txt
â”‚â”€â”€ README.md

---

## â–¶ï¸ Ejemplo de Flujo  

**Usuario:**  
Precio HLSO 16/20 para 15,000 lb destino China

**Bot responde:**  
ğŸ“¦ Producto: HLSO
ğŸ“ Talla: 16/20
ğŸ’² Precio base: $8.55/lb
âš™ï¸ Costo fijo: $0.25/lb
ğŸ§Š Glaseo (factor): 0.7
ğŸšš Flete: $0.20/lb

ğŸ’² Precio final estimado: $12.22/lb


---

## ğŸ“Œ Notas  
- El Excel es la **fuente de verdad**.  
- El cliente puede actualizar los precios y tallas sin tocar el cÃ³digo.  
- El bot reflejarÃ¡ automÃ¡ticamente los cambios.  


